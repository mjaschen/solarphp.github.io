<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<!-- cached 2013-07-17 10:05:50 -->
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>Solar Framework : Class : Solar_Sql_Adapter_MysqlReplicated : Query</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" media="screen" href="/public/Proxima/Controller/Page/cssfw/tools.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/public/Proxima/Controller/Page/cssfw/typo.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/public/Proxima/Controller/Page/cssfw/forms.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/public/Proxima/Controller/Page/cssfw/layout-navtop-1col.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/public/Helios/Controller/Page/style.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/public/Helios/App/Apidoc/style.css" />
</head>
<body id="apidoc-page">
    
    <div id="page">
        
        <div id="header" class="clearfix">
                        <div id="branding">
            </div><!-- end branding -->
            
            <div id="search">
                <script type="text/javascript"><!--
                google_ad_client = "pub-0303143248109581";
                /* 234x60, created 3/23/10 */
                google_ad_slot = "2131834509";
                google_ad_width = 234;
                google_ad_height = 60;
                //-->
                </script>
                <script type="text/javascript"
                src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                </script>
            </div><!-- end search -->
            
                <div id="auth">
            </div>
        </div><!-- end header -->
        
        <div id="content" class="clearfix">
            
            <div id="main">
                
    <div class="navheader">
        <table width="100%" summary="Navigation header">
            <tr>
                <th colspan="3" align="center">Solar_Sql_Adapter_MysqlReplicated::query()</th>
            </tr>
            <tr>
                <td width="20%" align="left"><a accesskey="p" href="class.Solar_Sql_Adapter_MysqlReplicated.nextSequence">Prev</a></td>
                <th width="60%" align="center">Solar_Sql_Adapter_MysqlReplicated</th>
                <td width="20%" align="right"><a accesskey="n" href="class.Solar_Sql_Adapter_MysqlReplicated.quote">Next</a></td>
            </tr>
        </table>
    </div>

<div id="class.Solar_Sql_Adapter_MysqlReplicated.query" class="section">

<h1>Solar_Sql_Adapter_MysqlReplicated::query()</h1>

<div class="methodsynopsis dc-description">
    <span class="modifier">public</span>
    <span class="type">PDOStatement</span>
     <span class="methodname">Solar_Sql_Adapter_MysqlReplicated::query</span> 
         ( <span class="methodparam"><span class="type">string</span>  <span class="parameter">$stmt</span></span>
        , <span class="methodparam"><span class="type">array</span>  <span class="parameter">$data</span> <span class="initializer"> = array ()</span></span>
    
 )</div>


<p class="para">Prepares and executes an SQL statement, optionally binding values to named parameters in the statement.</p>

<p class="para">Inherited from <a href="class.Solar_Sql_Adapter.query" class="link">Solar_Sql_Adapter</a>.</p>

<div>
<h2>Parameters</h2>

<ul class="itemizedlist">
<li class="listitem"><p class="para"><em class="emphasis">(string)</em> <code class="literal">$stmt</code>: The text of the SQL statement, optionally with named placeholders.</p></li>
<li class="listitem"><p class="para"><em class="emphasis">(array)</em> <code class="literal">$data</code>: An associative array of data to bind to the named placeholders.</p></li>
</ul>

</div>

<div>
<h2>Returns</h2>

<ul class="itemizedlist">
<li class="listitem"><p class="para"><em class="emphasis">(PDOStatement)</em></p></li>
</ul>

</div>

<div>
<h2>Description</h2>

<p class="para">Prepares and executes an SQL statement, optionally binding values to named parameters in the statement.</p>

<p class="para">This is the most-direct way to interact with the database; you
pass an SQL statement to the method, then the adapter uses
<a href="http://php.net/PDO" class="link external">&raquo; PDO</a> to execute the statement and return a result.</p>

<pre class="programlisting"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php
$sql </span><span style="color: #007700">= </span><span style="color: #0000BB">Solar</span><span style="color: #007700">::</span><span style="color: #0000BB">factory</span><span style="color: #007700">(</span><span style="color: #DD0000">'Solar_Sql'</span><span style="color: #007700">);

</span><span style="color: #FF8000">// $result is a PDOStatement
</span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">$sql</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT * FROM table'</span><span style="color: #007700">);</span></span></code></pre>


<p class="para">To help prevent SQL injection attacks, you should <em class="emphasis">always</em> quote
the values used in a direct query. Use <a href="class.Solar_Sql_Adapter.quote" class="link">quote()</a>,
<a href="class.Solar_Sql_Adapter.quoteInto" class="link">quoteInto()</a>, or 
<a href="class.Solar_Sql_Adapter.quoteMulti" class="link">quoteMulti()</a> to accomplish this.
Even easier, use the automated value binding provided by the query() 
method:</p>

<pre class="programlisting"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php
</span><span style="color: #FF8000">// BAD AND SCARY:
</span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">$sql</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT * FROM table WHERE foo = $bar'</span><span style="color: #007700">);

</span><span style="color: #FF8000">// Much much better:
</span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">$sql</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(
    </span><span style="color: #DD0000">'SELECT * FROM table WHERE foo = :bar'</span><span style="color: #007700">,
    array(</span><span style="color: #DD0000">'bar' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">$bar</span><span style="color: #007700">)
);</span></span></code></pre>


<p class="para">Note that adapters provide convenience methods to automatically quote
values on common operations:</p>

<ul class="itemizedlist">
<li class="listitem"><p class="para"><a href="class.Solar_Sql_Adapter.insert" class="link">Solar_Sql_Adapter::insert()</a></p></li>
<li class="listitem"><p class="para"><a href="class.Solar_Sql_Adapter.update" class="link">Solar_Sql_Adapter::update()</a></p></li>
<li class="listitem"><p class="para"><a href="class.Solar_Sql_Adapter.delete" class="link">Solar_Sql_Adapter::delete()</a></p></li>
</ul>

<p class="para">Additionally, the <a href="class.Solar_Sql_Select.Overview" class="link">Solar_Sql_Select</a> class is dedicated to
safely creating portable SELECT statements, so you may wish to use that
instead of writing literal SELECTs.</p>

<div>
<h3>Automated Binding of Values in PHP 5.2.1 and Later</h3>

<p class="para">With PDO in PHP 5.2.1 and later, we can no longer just throw an array
of data at the statement for binding. We now need to bind values
specifically to their respective placeholders.</p>

<p class="para">In addition, we can&#039;t bind one value to multiple identical named
placeholders; we need to bind that same value multiple times. So if
<code class="literal">:foo</code> is used three times, PDO uses <code class="literal">:foo</code> the first time, <code class="literal">:foo2</code> the
second time, and <code class="literal">:foo3</code> the third time.</p>

<p class="para">This query() method examins the statement for all <code class="literal">:name</code> placeholders
and attempts to bind data from the <code class="literal">$data</code> array.  The regular-expression
it uses is a little braindead; it cannot tell if the :name placeholder
is literal text or really a place holder.</p>

<p class="para">As such, you should <em class="emphasis">either</em> use the <code class="literal">$data</code> array for named-placeholder
value binding at query() time, <em class="emphasis">or</em> bind-as-you-go when building the 
statement, not both.  If you do, you are on your own to make sure
that nothing looking like a <code class="literal">:name</code> placeholder exists in the literal text.</p>

<p class="para">Question-mark placeholders are not supported for automatic value
binding at query() time.</p>

</div>

</div>
    
</div>
    <div class="navfooter">
        <table width="100%" summary="Navigation footer">
            <tr>
                <td width="40%" align="left"><a accesskey="p" href="class.Solar_Sql_Adapter_MysqlReplicated.nextSequence">Prev</a></td>
                <td width="20%" align="center"><a accesskey="u" href="class.Solar_Sql_Adapter_MysqlReplicated">Up</a></td>
                <td width="40%" align="right"><a accesskey="n" href="class.Solar_Sql_Adapter_MysqlReplicated.quote">Next</a></td>
            </tr>
            <tr>
                <td width="40%" align="left" valign="top">Solar_Sql_Adapter_MysqlReplicated::nextSequence()</td>
                <td width="20%" align="center"><a accesskey="h" href="apidoc">Home</a></td>
                <td width="40%" align="right" valign="top">Solar_Sql_Adapter_MysqlReplicated::quote()</td>
            </tr>
        </table>
    </div>
                <hr />
            </div><!-- end main content -->
            
            <div id="sub">
                                <hr />
            </div><!-- end sub content -->
            
            <div id="local">
                <h2 class="accessibility">Local</h2>
            </div><!--  end local nav -->
            
            <div id="nav">
                <h2 class="accessibility">Navigation</h2>
<ul class="clearfix">
    <li><a href="/">Home</a></li>
<li><a href="/project">Project</a></li>
<li><a href="/apidoc/package.index">Packages</a></li>
<li class="active"><a href="/apidoc/class.index">Classes</a></li>
<li><a href="/manual">Manual</a></li>
    <li><a href="https://github.com/solarphp/core/issues">Bugs</a></li>
</ul>
            </div><!-- end main nav -->
            
        </div><!-- end content -->
        
        <div id="footer" class="clearfix">
            <p style="float: left;">
    Copyright &copy; 2005-2013, <a href="mailto:pmjones@solarphp.com">Paul M. Jones</a> and other contributors.<br />
    Logo Design by <a href="http://wine-by-benito.blogspot.com/">Ben Carter</a>,
    Site Design by <a href="http://mattbrett.com/design">Matt Brett</a>.
</p>
<p style="float: right;">
    <!-- Site Meter -->
    <script type="text/javascript" src="http://s10.sitemeter.com/js/counter.js?site=s10solarphp">
    </script>
    <noscript><div>
        <a href="http://s10.sitemeter.com/stats.asp?site=s10solarphp"><img src="http://s10.sitemeter.com/meter.asp?site=s10solarphp" alt="Site Meter" /></a>
    </div></noscript>
    <!-- Copyright (c)2006 Site Meter -->
</p>
        </div><!-- end footer -->
        
    </div><!-- end page -->
    
    <div id="extra1">&nbsp;</div>
    <div id="extra2">&nbsp;</div>
    
</body>

</html>
